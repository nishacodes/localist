<h3 class="inline-block"> Recommendations </h3> <p class="tiny"> Hide</p>
<div class="recommendations">  
  <% @recommendations.each do |basis, lists_hash|  %>
    <% lists_hash.each do |list, recs| %>
        <ul>
          <% recs.each do |place| %>
          <!-- move some logic to the model -->
          <!-- add a link to the place to show it on the map? -->
          <% if @blacklist.include?(place) %>
            <% next %>
          <% else %>
            <li class="rec-container">
              <div class="square-container">
                <% if place.photos.length > 0 %>
                  <img src=<%= place.photos[0].url %> class="rec">
                <% end %>
                <div class="hover-actions">
                  <div class="white icon" data-reveal-id="remove_<%= place.id %>" data-place="<%= place.id %> "> x </div>
                  <div class="button-group">
                    <a href="#" class="button tiny outline-button block"> View details </a>
                    <a href="#" class="button tiny outline-button block" data-reveal-id="add_<%= place.id %>" data-place="<%= place.id %> " > Add to list </a>
                  </div>
                </div>
              </div>
              <p class="listing-title center"><%= place.name %> </p>
              <p class="listing-detail center">(based on <%= basis %>)</p>
            </li> 
          <% end %>
            <!-- THIS MODAL SHOWS WHEN U CLICK ADD TO LIST -->
            <div id="add_<%= place.id %>" class="reveal-modal tiny" data-reveal>
              <form action="/addplace" method="post" class="new_place" id="new_place">
                <h3>Add '<%= place.name %>' to:</h3>
                <div class="row">
                  <div class="large-12 columns">
                      <input type="hidden" name="place" value="<%= place.id %>">
                      <select name="list">
                        <% @lists.each do |list| %>
                          <option value="<%=list.id %>" name="list"> <%= list.name %></option>
                        <% end %>
                      </select>
                      <div class=actions>
                        <button type="submit" name="commit" id="place-submit" value="Add Place">Add</button>
                      </div>
                  </div>
                </div>
              </form>
              <a class="close-reveal-modal">&#215;</a>
            </div> 

            <!-- THIS MODAL SHOWS WHEN U CLICK THE 'X' -->
            <div id="remove_<%= place.id %>" class="reveal-modal tiny" data-reveal>
              <!-- <form action="/removeplace" method="post" class="new_place" id="new_place"> -->
                <h3>What should I do?</h3>
                <div class="row">
                  <div class="large-12 columns">
                      <input type="hidden" name="place" value="<%= place.id %>">
                      <!-- insert logic to give 2 options, one to blacklist, and the other to graylist? Maybe the graylist gets cleared every couple of weeks --> 
                  </div>
                </div>
              <!-- </form> -->
              <a class="close-reveal-modal">&#215;</a>
            </div> 


          <% end %>  
        </ul>
    <% end %>
  <% end %>
</div>  

